<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š é€»è¾‘å›å½’ vs çº¿æ€§å›å½’ - æ¢¯åº¦ä¸‹é™å¯è§†åŒ–</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 25px;
            font-size: 1.1em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
        }

        .section-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #2c3e50;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        canvas {
            width: 100%;
            border-radius: 10px;
            background: white;
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-label { font-size: 0.85em; opacity: 0.9; }
        .stat-value { font-size: 1.6em; font-weight: bold; margin-top: 5px; }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 28px;
            font-size: 1em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            color: white;
            transition: all 0.3s;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        button:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-start { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .btn-step { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .btn-reset { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }

        .calc-panel {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            margin-top: 15px;
        }

        .calc-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.05em;
        }

        .formula-box {
            background: rgba(102, 126, 234, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            border-left: 4px solid #667eea;
        }

        .step-box {
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .step-sigmoid { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .step-loss { background: #fff3e0; border-left: 4px solid #ff9800; }
        .step-gradient { background: #f3e5f5; border-left: 4px solid #9c27b0; }
        .step-update { background: #e8f5e9; border-left: 4px solid #4caf50; }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .comparison-item {
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .comparison-item h4 {
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .linear-reg { border-color: #3498db; background: rgba(52, 152, 219, 0.05); }
        .logistic-reg { border-color: #e74c3c; background: rgba(231, 76, 60, 0.05); }

        .status {
            text-align: center;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 10px;
            font-size: 1.05em;
            color: #2e7d32;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .status.running {
            background: #fff3e0;
            color: #e65100;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .explanation {
            background: #fff9c4;
            border-left: 4px solid #fbc02d;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            color: #5d4037;
            line-height: 1.8;
        }

        .explanation h4 {
            color: #f57f17;
            margin-bottom: 8px;
        }

        .github-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25) !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š é€»è¾‘å›å½’ vs çº¿æ€§å›å½’</h1>
        <p class="subtitle">ç†è§£åˆ†ç±»ä¸å›å½’çš„åŒºåˆ« - æ¢¯åº¦ä¸‹é™å¯è§†åŒ–</p>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">è¿­ä»£æ­¥æ•°</div>
                <div class="stat-value" id="step">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">é€»è¾‘å›å½’æŸå¤±</div>
                <div class="stat-value" id="logLoss">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">é€»è¾‘å›å½’å‡†ç¡®ç‡</div>
                <div class="stat-value" id="logAcc">0%</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">å­¦ä¹ ç‡</div>
                <div class="stat-value">0.1</div>
            </div>
        </div>

        <div class="main-grid">
            <!-- çº¿æ€§å›å½’ -->
            <div class="section">
                <div class="section-title">
                    ğŸ“ˆ çº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰
                </div>
                <canvas id="linearCanvas" width="600" height="400"></canvas>
                <div class="calc-panel">
                    <div class="calc-title">çº¿æ€§å›å½’å…¬å¼</div>
                    <div class="formula-box">
                        y = wx + b<br>
                        æŸå¤±å‡½æ•°: MSE = Î£(y - Å·)Â² / n
                    </div>
                    <div id="linearCalc" style="font-size: 0.9em; color: #666;"></div>
                </div>
            </div>

            <!-- é€»è¾‘å›å½’ -->
            <div class="section">
                <div class="section-title">
                    ğŸ¯ é€»è¾‘å›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰
                </div>
                <canvas id="logisticCanvas" width="600" height="400"></canvas>
                <div class="calc-panel">
                    <div class="calc-title">é€»è¾‘å›å½’å…¬å¼</div>
                    <div class="formula-box">
                        Ïƒ(z) = 1 / (1 + e<sup>-z</sup>), z = wx + b<br>
                        æŸå¤±: -[yÂ·log(p) + (1-y)Â·log(1-p)]
                    </div>
                    <div id="logisticCalc" style="font-size: 0.9em; color: #666;"></div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn-start" onclick="start()" id="startBtn">ğŸš€ å¼€å§‹è®­ç»ƒ</button>
            <button class="btn-step" onclick="step()" id="stepBtn" disabled>â­ï¸ å•æ­¥æ‰§è¡Œ</button>
            <button class="btn-reset" onclick="reset()">ğŸ”„ é‡ç½®</button>
        </div>

        <div class="status" id="status">
            å‡†å¤‡å°±ç»ªï¼ç‚¹å‡»å¼€å§‹è§‚çœ‹è®­ç»ƒè¿‡ç¨‹
        </div>

        <div class="comparison">
            <div class="comparison-item linear-reg">
                <h4>ğŸ“ˆ çº¿æ€§å›å½’</h4>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>é¢„æµ‹<strong>è¿ç»­å€¼</strong>ï¼ˆå¦‚æˆ¿ä»·ã€æ¸©åº¦ï¼‰</li>
                    <li>è¾“å‡ºèŒƒå›´ï¼š<strong>(-âˆ, +âˆ)</strong></li>
                    <li>æ‹Ÿåˆç›´çº¿ï¼šy = wx + b</li>
                    <li>æŸå¤±å‡½æ•°ï¼šå‡æ–¹è¯¯å·® (MSE)</li>
                </ul>
            </div>
            <div class="comparison-item logistic-reg">
                <h4>ğŸ¯ é€»è¾‘å›å½’</h4>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>é¢„æµ‹<strong>æ¦‚ç‡/åˆ†ç±»</strong>ï¼ˆæ˜¯/å¦ã€0/1ï¼‰</li>
                    <li>è¾“å‡ºèŒƒå›´ï¼š<strong>[0, 1]</strong></li>
                    <li>Sigmoidå‡½æ•°ï¼šÏƒ(wx + b)</li>
                    <li>æŸå¤±å‡½æ•°ï¼šäº¤å‰ç†µ (Cross-Entropy)</li>
                </ul>
            </div>
        </div>

        <div class="explanation">
            <h4>ğŸ’¡ æ ¸å¿ƒåŒºåˆ«</h4>
            <p>
                <strong>çº¿æ€§å›å½’</strong>è¯•å›¾æ‹Ÿåˆä¸€æ¡ç›´çº¿æ¥é¢„æµ‹è¿ç»­å€¼ï¼Œè€Œ<strong>é€»è¾‘å›å½’</strong>ä½¿ç”¨ Sigmoid å‡½æ•°å°†çº¿æ€§è¾“å‡º"å‹ç¼©"åˆ° 0-1 ä¹‹é—´ï¼Œç”¨äºåˆ†ç±»ä»»åŠ¡ã€‚
            </p>
            <p style="margin-top: 10px;">
                <strong>Sigmoid å‡½æ•°çš„ä½œç”¨ï¼š</strong>å°†ä»»æ„å®æ•°æ˜ å°„åˆ° (0,1) åŒºé—´ï¼Œå¯ä»¥è§£é‡Šä¸º"å±äºæŸä¸€ç±»çš„æ¦‚ç‡"ã€‚å½“ Ïƒ(z) â‰¥ 0.5 æ—¶é¢„æµ‹ä¸ºç±»åˆ«1ï¼Œå¦åˆ™ä¸ºç±»åˆ«0ã€‚
            </p>
        </div>

        <div style="margin-top: 30px; padding: 20px; text-align: center; border-top: 2px solid #e0e0e0;">
            <a href="https://github.com/happydog-intj/ai-learning-pages" target="_blank" class="github-link" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: linear-gradient(135deg, #24292e 0%, #3d4349 100%); color: white; text-decoration: none; border-radius: 10px; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                <svg height="24" width="24" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                <span>View on GitHub</span>
            </a>
        </div>
    </div>

    <script>
        // ç”»å¸ƒ
        const linearCanvas = document.getElementById('linearCanvas');
        const logisticCanvas = document.getElementById('logisticCanvas');
        const linearCtx = linearCanvas.getContext('2d');
        const logisticCtx = logisticCanvas.getContext('2d');

        // æ•°æ®
        const DATA = [
            {x: 1, y: 1.2, label: 0},
            {x: 1.5, y: 1.8, label: 0},
            {x: 2, y: 2.5, label: 0},
            {x: 2.5, y: 2.2, label: 0},
            {x: 3, y: 3.5, label: 0},
            {x: 3.5, y: 3.8, label: 0},
            {x: 4, y: 4.2, label: 1},
            {x: 4.5, y: 5.5, label: 1},
            {x: 5, y: 5.8, label: 1},
            {x: 5.5, y: 6.2, label: 1},
            {x: 6, y: 6.8, label: 1},
            {x: 6.5, y: 7.5, label: 1},
        ];

        // çŠ¶æ€
        let state = {
            // çº¿æ€§å›å½’å‚æ•°
            linearW: 0.5,
            linearB: 0.5,
            // é€»è¾‘å›å½’å‚æ•°
            logisticW: 0.1,
            logisticB: 0.0,
            step: 0,
            running: false,
            intervalId: null
        };

        const LR = 0.1; // å­¦ä¹ ç‡

        // Sigmoid å‡½æ•°
        function sigmoid(z) {
            return 1 / (1 + Math.exp(-z));
        }

        // è®¡ç®—çº¿æ€§å›å½’æŸå¤± (MSE)
        function calcLinearLoss() {
            let loss = 0;
            DATA.forEach(p => {
                const pred = state.linearW * p.x + state.linearB;
                const error = p.y - pred;
                loss += error * error;
            });
            return loss / DATA.length;
        }

        // è®¡ç®—é€»è¾‘å›å½’æŸå¤± (Cross-Entropy)
        function calcLogisticLoss() {
            let loss = 0;
            DATA.forEach(p => {
                const z = state.logisticW * p.x + state.logisticB;
                const pred = sigmoid(z);
                const epsilon = 1e-7; // é˜²æ­¢log(0)
                loss += -(p.label * Math.log(pred + epsilon) + (1 - p.label) * Math.log(1 - pred + epsilon));
            });
            return loss / DATA.length;
        }

        // è®¡ç®—é€»è¾‘å›å½’å‡†ç¡®ç‡
        function calcLogisticAccuracy() {
            let correct = 0;
            DATA.forEach(p => {
                const z = state.logisticW * p.x + state.logisticB;
                const pred = sigmoid(z) >= 0.5 ? 1 : 0;
                if (pred === p.label) correct++;
            });
            return (correct / DATA.length * 100).toFixed(1);
        }

        // çº¿æ€§å›å½’æ¢¯åº¦ä¸‹é™ä¸€æ­¥
        function stepLinear() {
            let gradW = 0, gradB = 0;
            
            DATA.forEach(p => {
                const pred = state.linearW * p.x + state.linearB;
                const error = pred - p.y;
                gradW += 2 * error * p.x / DATA.length;
                gradB += 2 * error / DATA.length;
            });

            state.linearW -= LR * gradW;
            state.linearB -= LR * gradB;

            return { gradW, gradB };
        }

        // é€»è¾‘å›å½’æ¢¯åº¦ä¸‹é™ä¸€æ­¥
        function stepLogistic() {
            let gradW = 0, gradB = 0;
            
            DATA.forEach(p => {
                const z = state.logisticW * p.x + state.logisticB;
                const pred = sigmoid(z);
                const error = pred - p.label;
                gradW += error * p.x / DATA.length;
                gradB += error / DATA.length;
            });

            state.logisticW -= LR * gradW;
            state.logisticB -= LR * gradB;

            return { gradW, gradB };
        }

        // ç»˜åˆ¶çº¿æ€§å›å½’
        function drawLinear() {
            const ctx = linearCtx;
            const W = 600, H = 400;
            
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, W, H);

            const PAD = 50;
            const tx = x => PAD + (x / 7) * (W - 2*PAD);
            const ty = y => H - PAD - (y / 8) * (H - 2*PAD);

            // ç½‘æ ¼
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 7; i++) {
                ctx.beginPath();
                ctx.moveTo(tx(i), PAD);
                ctx.lineTo(tx(i), H - PAD);
                ctx.stroke();
            }
            for (let i = 0; i <= 8; i++) {
                ctx.beginPath();
                ctx.moveTo(PAD, ty(i));
                ctx.lineTo(W - PAD, ty(i));
                ctx.stroke();
            }

            // åæ ‡è½´
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(PAD, H - PAD);
            ctx.lineTo(W - PAD, H - PAD);
            ctx.moveTo(PAD, PAD);
            ctx.lineTo(PAD, H - PAD);
            ctx.stroke();

            // æ‹Ÿåˆçº¿
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(tx(0), ty(state.linearW * 0 + state.linearB));
            ctx.lineTo(tx(7), ty(state.linearW * 7 + state.linearB));
            ctx.stroke();

            // æ•°æ®ç‚¹
            DATA.forEach(p => {
                ctx.fillStyle = p.label === 0 ? '#e74c3c' : '#2ecc71';
                ctx.strokeStyle = p.label === 0 ? '#c0392b' : '#27ae60';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(tx(p.x), ty(p.y), 6, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();

                // è¯¯å·®çº¿
                const pred = state.linearW * p.x + state.linearB;
                ctx.strokeStyle = 'rgba(231, 76, 60, 0.3)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 3]);
                ctx.beginPath();
                ctx.moveTo(tx(p.x), ty(p.y));
                ctx.lineTo(tx(p.x), ty(pred));
                ctx.stroke();
                ctx.setLineDash([]);
            });

            // æ ‡ç­¾
            ctx.fillStyle = '#2c3e50';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            for (let i = 0; i <= 7; i++) {
                ctx.fillText(i.toString(), tx(i), H - PAD + 20);
            }
            ctx.textAlign = 'right';
            for (let i = 0; i <= 8; i++) {
                ctx.fillText(i.toString(), PAD - 10, ty(i) + 4);
            }

            ctx.fillStyle = '#3498db';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`y = ${state.linearW.toFixed(3)}x + ${state.linearB.toFixed(3)}`, PAD + 10, PAD + 20);
        }

        // ç»˜åˆ¶é€»è¾‘å›å½’
        function drawLogistic() {
            const ctx = logisticCtx;
            const W = 600, H = 400;
            
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, W, H);

            const PAD = 50;
            const tx = x => PAD + (x / 7) * (W - 2*PAD);
            const ty = y => H - PAD - y * (H - 2*PAD);

            // ç½‘æ ¼
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 7; i++) {
                ctx.beginPath();
                ctx.moveTo(tx(i), PAD);
                ctx.lineTo(tx(i), H - PAD);
                ctx.stroke();
            }
            for (let i = 0; i <= 10; i++) {
                ctx.beginPath();
                ctx.moveTo(PAD, ty(i/10));
                ctx.lineTo(W - PAD, ty(i/10));
                ctx.stroke();
            }

            // åæ ‡è½´
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(PAD, H - PAD);
            ctx.lineTo(W - PAD, H - PAD);
            ctx.moveTo(PAD, PAD);
            ctx.lineTo(PAD, H - PAD);
            ctx.stroke();

            // Sigmoid æ›²çº¿
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = 0; x <= 7; x += 0.1) {
                const z = state.logisticW * x + state.logisticB;
                const y = sigmoid(z);
                if (x === 0) {
                    ctx.moveTo(tx(x), ty(y));
                } else {
                    ctx.lineTo(tx(x), ty(y));
                }
            }
            ctx.stroke();

            // å†³ç­–è¾¹ç•Œ (y = 0.5)
            ctx.strokeStyle = '#9b59b6';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 5]);
            ctx.beginPath();
            ctx.moveTo(PAD, ty(0.5));
            ctx.lineTo(W - PAD, ty(0.5));
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.fillStyle = '#9b59b6';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('å†³ç­–è¾¹ç•Œ (0.5)', PAD + 10, ty(0.5) - 5);

            // æ•°æ®ç‚¹
            DATA.forEach(p => {
                const z = state.logisticW * p.x + state.logisticB;
                const pred = sigmoid(z);
                
                ctx.fillStyle = p.label === 0 ? '#e74c3c' : '#2ecc71';
                ctx.strokeStyle = p.label === 0 ? '#c0392b' : '#27ae60';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(tx(p.x), ty(p.label), 6, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();

                // é¢„æµ‹å€¼
                ctx.fillStyle = 'rgba(231, 76, 60, 0.3)';
                ctx.beginPath();
                ctx.arc(tx(p.x), ty(pred), 4, 0, Math.PI * 2);
                ctx.fill();
            });

            // æ ‡ç­¾
            ctx.fillStyle = '#2c3e50';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            for (let i = 0; i <= 7; i++) {
                ctx.fillText(i.toString(), tx(i), H - PAD + 20);
            }
            ctx.textAlign = 'right';
            for (let i = 0; i <= 10; i++) {
                ctx.fillText((i/10).toFixed(1), PAD - 10, ty(i/10) + 4);
            }

            ctx.fillStyle = '#e74c3c';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`Ïƒ(${state.logisticW.toFixed(3)}x + ${state.logisticB.toFixed(3)})`, PAD + 10, PAD + 20);
        }

        // æ›´æ–°UI
        function updateUI() {
            document.getElementById('step').textContent = state.step;
            document.getElementById('logLoss').textContent = calcLogisticLoss().toFixed(3);
            document.getElementById('logAcc').textContent = calcLogisticAccuracy() + '%';
        }

        // æ›´æ–°è®¡ç®—è¯¦æƒ…
        function updateCalcDetails(linearGrad, logisticGrad) {
            // çº¿æ€§å›å½’è¯¦æƒ…
            const linearLoss = calcLinearLoss();
            document.getElementById('linearCalc').innerHTML = `
                <div class="step-box step-sigmoid">
                    <strong>å½“å‰å‚æ•°ï¼š</strong><br>
                    w = ${state.linearW.toFixed(4)}, b = ${state.linearB.toFixed(4)}
                </div>
                <div class="step-box step-loss">
                    <strong>æŸå¤±å‡½æ•° (MSE)ï¼š</strong><br>
                    L = ${linearLoss.toFixed(4)}
                </div>
                <div class="step-box step-gradient">
                    <strong>æ¢¯åº¦ï¼š</strong><br>
                    âˆ‚L/âˆ‚w = ${linearGrad.gradW.toFixed(4)}<br>
                    âˆ‚L/âˆ‚b = ${linearGrad.gradB.toFixed(4)}
                </div>
            `;

            // é€»è¾‘å›å½’è¯¦æƒ…
            const logLoss = calcLogisticLoss();
            const samplePoint = DATA[0];
            const z = state.logisticW * samplePoint.x + state.logisticB;
            const prob = sigmoid(z);

            document.getElementById('logisticCalc').innerHTML = `
                <div class="step-box step-sigmoid">
                    <strong>ç¤ºä¾‹ç‚¹ (x=${samplePoint.x}, label=${samplePoint.label})ï¼š</strong><br>
                    z = ${state.logisticW.toFixed(3)} Ã— ${samplePoint.x} + ${state.logisticB.toFixed(3)} = ${z.toFixed(3)}<br>
                    Ïƒ(z) = 1/(1+e<sup>-${z.toFixed(3)}</sup>) = ${prob.toFixed(4)}<br>
                    é¢„æµ‹: ${prob >= 0.5 ? 'ç±»åˆ«1' : 'ç±»åˆ«0'} ${prob >= 0.5 === (samplePoint.label === 1) ? 'âœ“' : 'âœ—'}
                </div>
                <div class="step-box step-loss">
                    <strong>äº¤å‰ç†µæŸå¤±ï¼š</strong><br>
                    L = ${logLoss.toFixed(4)}
                </div>
                <div class="step-box step-gradient">
                    <strong>æ¢¯åº¦ï¼š</strong><br>
                    âˆ‚L/âˆ‚w = ${logisticGrad.gradW.toFixed(4)}<br>
                    âˆ‚L/âˆ‚b = ${logisticGrad.gradB.toFixed(4)}
                </div>
                <div class="step-box step-update">
                    <strong>å‡†ç¡®ç‡ï¼š</strong> ${calcLogisticAccuracy()}%
                </div>
            `;
        }

        // å•æ­¥æ‰§è¡Œ
        function step() {
            state.step++;

            const linearGrad = stepLinear();
            const logisticGrad = stepLogistic();

            drawLinear();
            drawLogistic();
            updateUI();
            updateCalcDetails(linearGrad, logisticGrad);

            document.getElementById('status').textContent = `è¿­ä»£ ${state.step} å®Œæˆ - é€»è¾‘å›å½’å‡†ç¡®ç‡: ${calcLogisticAccuracy()}%`;

            if (state.step >= 100) {
                document.getElementById('stepBtn').disabled = true;
                document.getElementById('status').className = 'status';
                document.getElementById('status').textContent = `âœ… è®­ç»ƒå®Œæˆï¼é€»è¾‘å›å½’æœ€ç»ˆå‡†ç¡®ç‡: ${calcLogisticAccuracy()}%`;
            }
        }

        // å¼€å§‹è‡ªåŠ¨è®­ç»ƒ
        async function start() {
            if (state.running) return;

            state.running = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stepBtn').disabled = false;
            document.getElementById('status').className = 'status running';

            for (let i = 0; i < 100 && state.running; i++) {
                step();
                await sleep(100);
            }

            state.running = false;
            document.getElementById('startBtn').disabled = false;
        }

        // é‡ç½®
        function reset() {
            state.linearW = 0.5;
            state.linearB = 0.5;
            state.logisticW = 0.1;
            state.logisticB = 0.0;
            state.step = 0;
            state.running = false;

            drawLinear();
            drawLogistic();
            updateUI();

            document.getElementById('linearCalc').innerHTML = '';
            document.getElementById('logisticCalc').innerHTML = '';
            
            document.getElementById('status').className = 'status';
            document.getElementById('status').textContent = 'å·²é‡ç½®ï¼å‡†å¤‡å¼€å§‹';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stepBtn').disabled = true;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // åˆå§‹åŒ–
        drawLinear();
        drawLogistic();
        updateUI();
    </script>
</body>
</html>
